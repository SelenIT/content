## Просмотр HTTP-сообщений из командной строки

В мире Unix-подобных операционных систем есть многофункциональная утилита _curl_, которая позволяет работать с протоколом HTTP. С одной стороны с её помощью можно скачивать файлы, отправлять данные пользователей на сервер аналогично тому, как это делается через формы на сайтах, работать с API и даже отправлять письмо. С другой — это отличный способ познакомиться с работой протокола или протестировать веб-приложение, которое работает на стороне сервера.

Чтобы скачать главную страницу какого-то сайта (например, _http://google.co.in_) можно воспользоваться командой:

```bash
curl http://google.co.in
```

В терминале вы увидите HTML-код страницы — это тело сообщения ответа. Существует возможность посмотреть и полные сообщения запроса и ответа, добавив ключ `-v`:

```bash
curl -v http://google.co.in
```

В первой части вывода содержится информация о процессе установления соединения через протокол TCP:

```bash
*   Trying 173.194.222.94...
* TCP_NODELAY set
* Connected to google.co.in (173.194.222.94) port 80 (#0)
```

Вторая часть вывода — полное HTML-сообщение запроса со стартовой строкой и заголовками (тело сообщения отсутствует):

```bash
> GET / HTTP/1.1            # Стартовая строка с методом запроса, адресом внутри сайта и версией протокола
> Host: google.co.in        # Заголовок с указанием хоста, на котором работает веб-сервер
> User-Agent: curl/7.64.1   # Заголовок с информацией о клиенте, программе запущенной у пользователя
> Accept: */*               # Заголовок какие типы контента клиент может понять
>                           # После этой пустой строки могло быть тело запроса
```

Третья часть вывода — полное HTML-сообщение ответа веб-сервера со стартовой строкой, заголовками и телом, в котором передаётся HTML-код страницы:

```bash
< HTTP/1.1 301 Moved Permanently            # Стартовая строка с версией протокола, кодом и статусом ответа
< Location: http://www.google.co.in/        # Заголовок с адресом, для которого веб-сервер формирует ответ
< Content-Type: text/html; charset=UTF-8    # Заголовок, который указывает тип данных и кодировку тела сообщения
< Date: Wed, 21 Jul 2021 11:46:24 GMT       # Заголовок, который содержит дату загрузки страницы
< Expires: Fri, 20 Aug 2021 11:46:24 GMT    # Заголовок, который содержит дату, после которой которой контент считается устаревшим
< Cache-Control: public, max-age=2592000    # Заголовок используется для определения времени (в секундах) и типа кэширования на сервере
< Server: gws                               # Заголовок с указанием наименования веб-сервера (gws - Google Web Server)
< Content-Length: 221                       # Заголовок, в котором указано количество символов в теле сообщения
< X-XSS-Protection: 0                       # Заголовок, который предотвращает загрузку в случае атаки XSS (Cross-site scripting)
< X-Frame-Options: SAMEORIGIN               # Заголовок устанавливает тип загрузки внутри тэга <iframe>
<                                           # После этой пустой строки идёт тело ответа веб-сервера
<HTML><HEAD><meta http-equiv="content-type" content="text/html;charset=utf-8">
<TITLE>301 Moved</TITLE></HEAD><BODY>
<H1>301 Moved</H1>
The document has moved
<A HREF="http://www.google.co.in/">here</A>.
</BODY></HTML>
```

Четвёртая часть вывода касается этапа завершения соединения:

```bash
* Connection #0 to host google.co.in left intact
* Closing connection 0
```

В выводе команды curl символы `*`, `>` и `<` являются маркерами типа информации, отображённой в выводе команды. `*` используется для сервисной информации о соединении, `>` — для обозначения запросов клиента (клиентом является curl), `<` — для обозначения ответов сервера.
